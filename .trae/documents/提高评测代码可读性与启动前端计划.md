## 目标
- 提升后端/前端评测代码的可读性：更清晰的命名、结构化的小函数、必要的注释与文档串说明。
- 保留现有功能与接口行为不变。
- 启动前端开发服务器，便于联调与演示。

## 后端改进（Python / FastAPI）
### 文件：backend/app/service/rag_v1/evaluation_service.py
- 重命名辅助函数：
  - `_n` → `normalize_text`
  - `_final_choices` → `extract_final_choices`
  - `_hit` → `is_gold_hit_in_choices`
  - `_post` → `post_recommendation_request`
  - `_payload` → `build_request_payload`
- 为公开方法添加文档串与关键行注释：
  - `evaluate_excel`：入参含义、组合循环、命中规则（top@1 精确匹配；top@k 包含匹配；逐场景命中数组）。
  - `evaluate_params`：互斥校验、负载构造、命中与逐场景命中。
- 明确类型与中间变量命名：`strategy_variants`、`variantKey`、`scenarioText`、`goldAnswer`、`perScenarioHits` 等。
- 统一返回结构字段命名且添加简短注释块，便于前端消费与调试。

### 文件：backend/app/controller/rag_v1/evaluation_controller.py
- 路由函数添加简短文档串：说明文件模式与非文件模式参数规则。
- 局部变量重命名：`is_file_mode` → `isFileMode` 等，避免缩写歧义。
- 在构造 `strategy_variants` 时增加异常安全与注释。

## 前端改进（React + TS + Antd + Tailwind）
### 文件：frontend/eval-app/src/App.tsx
- 状态变量重命名：
  - `serverUrl` → `backendUrl`
  - `endpoint` → `selectedEndpoint`
  - `fileList` → `uploadedFiles`
  - `result` → `evaluationResult`
  - `clientLatencyMs` → `clientLatencyMillis`
  - 组合相关：`topScenarios` → `variantTopScenarios`，`topRecommendations` → `variantTopRecommendations`
- 提取常量：表格列定义为 `DETAIL_COLUMNS`、`VARIANT_COLUMNS`。
- 将 UI 拆成小组件（同文件内）：
  - `ServerSettingsPanel`（URL、上传、端点选择、开始评测）
  - `ParameterPanel`（五个策略参数与可选 top 组合）
  - `SummaryCards`（总体与A/B摘要）
  - `DetailsTable`（A/B明细与 variants）
- 为关键交互与提交处添加注释（如何构造 `FormData`，何处统计端到端耗时）。

## 启动与验证
- 安装并启动前端：
  - 在 `frontend/eval-app` 运行 `npm install`，`npm run dev`。
- 通过页面上传示例 Excel，设置 `backendUrl` 指向后端（默认 `http://localhost:8000`），验证评测与 variants 展示。

## 不改变的行为
- 路由与返回结构保持现状：`/api/v1/evaluate-recommend`，A/B 与 `variants` 字段不变。
- HTTP 直连被测后端 URL 的逻辑保留（httpx）。

如确认该计划，我将完成以上重构（仅重命名、注释与小组件抽取，不改变外部接口），随后为你启动前端开发服务器。